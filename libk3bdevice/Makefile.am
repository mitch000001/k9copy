AM_CPPFLAGS= -I$(srcdir) $(all_includes) $(HAL_INCS) $(DBUS_INCS) $(DBUSQT_INCS)

KDE_CXXFLAGS = $(ENABLE_PERMISSIVE_FLAG)

METASOURCES = AUTO

libk3bdevice_la_LIBADD = $(LIB_KIO) $(RESMGR_LIB) $(CAM_LIB) $(HAL_DBUS_LIBS)

# lib version 2 for K3b 0.11.x 
libk3bdevice_la_LDFLAGS = $(all_libraries) -version-info 2:1:0 -no-undefined

if include_HAL
libk3bdevice_la_SOURCES = k3bdevice.cpp k3bdevice_mmc.cpp k3bscsicommand.cpp \
	k3btrack.cpp k3btoc.cpp k3bdevicemanager.cpp k3bmsf.cpp k3bdiskinfo.cpp \
	k3bdeviceglobals.cpp k3bcrc.cpp k3bcdtext.cpp k3bscsicommand_bsd.cpp \
	k3bscsicommand_linux.cpp
else
libk3bdevice_la_SOURCES = k3bdevice.cpp k3bdevice_mmc.cpp k3bscsicommand.cpp \
k3btrack.cpp k3btoc.cpp k3bdevicemanager.cpp k3bmsf.cpp k3bdiskinfo.cpp \
k3bdeviceglobals.cpp k3bcrc.cpp k3bcdtext.cpp
endif

noinst_HEADERS = k3bdevicemanager.h k3bdevice.h k3btoc.h k3btrack.h \
	k3bdeviceglobals.h k3bdiskinfo.h k3bcdtext.h k3bmsf.h k3bdevicetypes.h

noinst_LTLIBRARIES = libk3bdevice.la
